<!DOCTYPE html>
<html>
	<head>


		<!--Import Google Icon Font-->
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<title>bitty.synth</title>

	</head>
	<body style="overflow:hidden">
		<!--Import jQuery before materialize.js-->
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="js/materialize.min.js"></script>

		<!-- Components Guide: http://materializecss.com/ -->

		<header>
			<!-- Top Bar -->
			<nav style="height:64px; -webkit-app-region:drag; -webkit-user-select: none;">
				<!-- #eceff1 -->
				<div class="nav-wrapper" style="background-color:#ffffff" id="topNavBar">
					<a href="#" class="brand-logo center" onclick="$('.button-collapse').sideNav('show');"><img id = "navImage" src="images/bitty.synth.png" height="56px" /></a>
				</div>
			</nav>
			<a href="#" data-activates="slide-out" class="button-collapse" style="visibility: hidden"><i class="material-icons">menu</i></a>
		</header>

		<script>
		if (window.navigator.userAgent.toUpperCase().indexOf("MAC") != -1) {
			topNavBar.style.backgroundColor = "#dedede";
			console.log("Mac OS topbar color applied. ")
		}
		/*
		if (window.navigator.userAgent.toUpperCase().indexOf("X11") != -1) {
			topNavBar.style.backgroundColor = "#383733";
			navImage.src = "images/bitty.synth.x11.png";
			console.log("X11 topbar color applied. ");
		}
		*/
		</script>

		<!-- Side Bar -->
		<ul id="slide-out" class="side-nav">
			<!-- Top Part
			<li><div class="userView">
				<img class="background" src="images/background.jpg">
				<a href="#!name"><span class="white-text name">bitty.synth</span></a>
			</div></li>
			-->
			<!-- Sidebar Links -->
			<li><a class="subheader">Synthesize</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='liveview.html'; $('.button-collapse').sideNav('hide');"><i class="material-icons">library_music</i>Live View</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='timelineview.html'; $('.button-collapse').sideNav('hide');"><i class="material-icons">queue_music</i>Timeline View</a></li>
			<li><div class="divider"></div></li>
			<li><a class="subheader">Canvases</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='canvas.html?canvasn=1'; $('.button-collapse').sideNav('hide');"><i class="material-icons">label</i>Canvas 1</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='canvas.html?canvasn=2'; $('.button-collapse').sideNav('hide');"><i class="material-icons">label</i>Canvas 2</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='canvas.html?canvasn=3'; $('.button-collapse').sideNav('hide');"><i class="material-icons">label</i>Canvas 3</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='canvas.html?canvasn=4'; $('.button-collapse').sideNav('hide');"><i class="material-icons">label</i>Canvas 4</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='canvas.html?canvasn=5'; $('.button-collapse').sideNav('hide');"><i class="material-icons">label</i>Canvas 5</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='externalcanvas.html?extn=1'; $('.button-collapse').sideNav('hide');"><i class="material-icons">open_in_browser</i>External 1</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='externalcanvas.html?extn=2'; $('.button-collapse').sideNav('hide');"><i class="material-icons">open_in_browser</i>External 2</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='externalcanvas.html?extn=3'; $('.button-collapse').sideNav('hide');"><i class="material-icons">open_in_browser</i>External 3</a></li>
			<li><div class="divider"></div></li>
			<li><a class="subheader">Other</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='help.html'; $('.button-collapse').sideNav('hide'); "><i class="material-icons">help</i>Help</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='start.html'; $('.button-collapse').sideNav('hide');"><i class="material-icons">grade</i>Start Page</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='settings.html'; $('.button-collapse').sideNav('hide');"><i class="material-icons">settings</i>Settings</a></li>
				<li><a class="waves-effect" href="#!" onmouseup="document.getElementById('contentContainer').src='itty_bitty_ditty_synth_library_front_end/index_librarybrowser.html'; $('.button-collapse').sideNav('hide');"><i class="material-icons">assessment</i>Predictive Library</a></li>
		</ul>

		<main>
			<!-- Main ContentContainer -->
			<iframe src="start.html" style="position:absolute; left:0px; top: 68px; width:100%; height:200px; border:0px; " id="contentContainer">
			</iframe>
		</main>

		<script>
			// Initialize Sidebar
			$(".button-collapse").sideNav();
			// Initialize contentContainer
			function resizeContentContainer(){
				document.getElementById("contentContainer").style.height = window.innerHeight - 68 + "px";
			}
			window.addEventListener("resize", resizeContentContainer, false);
			resizeContentContainer();

			document.addEventListener(
				'deviceready',
				onDeviceReady,
				false
			);
			function onDeviceReady() {
				// StatusBar.backgroundColorByHexString("#FFFFFF");
			}
		</script>

		<!-- Cover for Offline -->
		<div style="position:absolute; width:100%; height:100%; left:0px; top:0px" id="loadingCover">
			<table style="position:absolute; left:0px; top:0px; background-color:white" height="100%" width="100%" valign="center">
				<tr>
					<td>
						<center>
							<img src="images/wait.png" width="32px" height="32px" />
							<br />
						</center>
						<div style="font-family:Arial, Arial, serif; font-size:14px; padding:6px">
							<center>Waiting for internet connection</center>
						</div>
						<div style="font-family:Arial, Arial, serif; font-size:13px; padding:6px">
							<br />
							<center> <div class="progress" style="width:25%">
								<div class="indeterminate"></div>
							</div></center>
							<br />
						</div>
					</td>
				</tr>
			</table>
		</div>

		<!-- Script for online detection -->
		<script>
			if (navigator.onLine || localStorage.getItem("bypassInternetCheck")=="true") {
				document.getElementById("loadingCover").style.visibility = "hidden";
			} else {
				setInterval(function(){if (navigator.onLine || localStorage.getItem("bypassInternetCheck")=="true") location = "index.html"}, 2000);
			}

			function bypassInternetCheck() {
				localStorage.setItem("bypassInternetCheck", true);
			}
		</script>

		<script src="js/preferences.js"></script>

		<script>
		window.onbeforeunload = function(evt) {
		    if (loadBooleanPreference(SETTINGS_PROMPT_EXIT)) {
				var message = 'Exit bitty.synth? ';
			    if (typeof evt == 'undefined') {
			        evt = window.event;
			    }
			    if (evt) {
			        evt.returnValue = message;
			    }
			    return message;
		    }

		}

		//<!-- Check if introduction has been shown -->
		var isIntroShow = localStorage.getItem("com.kaellel.bitty.synth.introShown");
		if (isIntroShow == null || isIntroShow == "" || isIntroShow == "undefined") window.location = "introduction.html";
		</script>
	</body>
</html>
